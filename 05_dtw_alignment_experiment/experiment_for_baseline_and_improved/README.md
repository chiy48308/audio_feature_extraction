# 音頻特徵提取方法對比實驗

本實驗旨在比較基準版本和改進版本的音頻特徵提取方法的效果差異。

## 實驗目的

1. 評估改進版本在特徵提取穩定性上的提升
2. 比較兩個版本在處理速度上的差異
3. 分析特徵質量的改進效果

## 實驗內容

### 基準版本特徵
- 基本的 librosa MFCC 提取
- 簡單的基頻檢測
- 基礎能量特徵計算

### 改進版本特徵
- 優化的預處理流程
- 增強的基頻檢測
- 多維度能量特徵
- 完整的特徵評估系統

## 數據集

- 教師音頻：`preprocess_teacher_audio/`
- 學生音頻：`preprocess_student_audio/`

## 評估指標

### 1. 對齊誤差範圍
- **指標**：對齊偏差（RMSE）
- **目標閾值**：RMSE ≤ 200 毫秒
- **計算方法**：計算預測對齊點與真實對齊點之間的均方根誤差
- **評估標準**：
  - 優秀：RMSE < 150ms
  - 良好：150ms ≤ RMSE ≤ 200ms
  - 需改進：RMSE > 200ms

### 2. 對齊一致性
- **指標**：預測起訖點 vs. 標註對齊度
- **目標閾值**：每句偏差 < 250ms 且無過早／過晚切點
- **計算方法**：
  - 計算每個音頻段的起始和結束點偏差
  - 統計異常切點（過早或過晚）的數量
- **評估標準**：
  - 優秀：無異常切點，且95%以上的對齊點偏差<200ms
  - 良好：異常切點≤3個，且90%以上的對齊點偏差<250ms
  - 需改進：其他情況

### 3. 語音－文本對應率
- **指標**：正確對齊比例（alignment accuracy）
- **目標閾值**：對應準確率 ≥ 95%
- **計算方法**：
  - 計算正確對齊的段落數量與總段落數量的比率
  - 正確對齊定義：起訖點偏差均<250ms
- **評估標準**：
  - 優秀：準確率 ≥ 97%
  - 良好：95% ≤ 準確率 < 97%
  - 需改進：準確率 < 95%

## 實驗結果

實驗結果將保存在以下文件中：

1. 詳細評估結果
   - `alignment_evaluation_[timestamp].csv`：包含每個音頻文件的詳細評估指標
   - `alignment_summary_[timestamp].csv`：包含基準版本和改進版本的統計摘要

2. CSV文件欄位說明
   - `method`：使用的方法（baseline/improved）
   - `audio_file`：音頻文件名
   - `rmse_ms`：對齊RMSE（毫秒）
   - `rmse_within_threshold`：是否符合RMSE閾值要求
   - `consistency_rate`：對齊一致性比率
   - `abnormal_points`：異常切點數量
   - `accuracy_rate`：對應準確率
   - `meets_accuracy_threshold`：是否達到準確率要求

## 使用方法

1. 運行特徵提取實驗：
   ```bash
   python feature_extraction_comparison.py
   ```

2. 運行評估指標計算：
   ```bash
   python evaluation_metrics.py
   ```

3. 查看結果：
   - 檢查生成的CSV文件了解詳細評估指標
   - 查看統計摘要了解整體改進效果

## 注意事項

1. 確保安裝了所需的依賴包：
   - librosa
   - numpy
   - matplotlib
   - pandas
   - audio_feature_extraction_toolkit

2. 實驗過程中的錯誤處理：
   - 所有錯誤都會被記錄
   - 異常數據會被標記
   - 處理失敗的文件會被單獨列出

3. 結果解釋：
   - RMSE越低表示對齊越準確
   - 一致性比率越高表示對齊越穩定
   - 對應準確率越高表示特徵提取效果越好 